{
  "name": "é›²ç«¯å½±ç‰‡æ™‚é–“è»¸é‡é» final",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -112,
        64
      ],
      "id": "e666b2db-b0c3-4de1-b97d-775cd834b342",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "command": "={{ $('ç”¢ç”Ÿ ffmpeg åˆ‡å‰²å‘½ä»¤').item.json.command }}"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        752,
        64
      ],
      "id": "c4b95eaf-cad2-4c5b-9773-bc984f2e869f",
      "name": "éŸ³è¨Šåˆ‡å‰²æ¯60ç§’"
    },
    {
      "parameters": {
        "fileSelector": "/tmp/split_*.mp3",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        928,
        64
      ],
      "id": "470725d7-a1f2-441e-a132-6d07a2c4e344",
      "name": "è®€å–åˆ†æ®µéŸ³è¨Š"
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1152,
        64
      ],
      "id": "61ec318d-686b-4955-b8c4-af2758271da2",
      "name": "é€æ®µè™•ç†éŸ³è¨Š"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/audio/transcriptions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "whisper-1"
            },
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            },
            {
              "name": "response_format",
              "value": "srt"
            },
            {
              "name": "prompt",
              "value": "ä½¿ç”¨ç¹é«”ä¸­æ–‡"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1328,
        160
      ],
      "id": "785cf431-91c4-4ae2-a907-3bd1c4f8b684",
      "name": "éŸ³è¨Šè½‰å­—å¹•",
      "credentials": {
        "openAiApi": {
          "id": "dvFQiP3wnloi1k4P",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "function parseTime(timeStr) {\n  const [hours, minutes, rest] = timeStr.split(':');\n  const [seconds, milliseconds] = rest.split(',');\n  return (\n    parseInt(hours) * 3600 * 1000 +\n    parseInt(minutes) * 60 * 1000 +\n    parseInt(seconds) * 1000 +\n    parseInt(milliseconds)\n  );\n}\n\nfunction formatTime(ms) {\n  const hours = String(Math.floor(ms / 3600000)).padStart(2, '0');\n  ms %= 3600000;\n  const minutes = String(Math.floor(ms / 60000)).padStart(2, '0');\n  ms %= 60000;\n  const seconds = String(Math.floor(ms / 1000)).padStart(2, '0');\n  const milliseconds = String(ms % 1000).padStart(3, '0');\n  return `${hours}:${minutes}:${seconds},${milliseconds}`;\n}\n\nlet combinedSrt = '';\nlet index = 1;\nlet offset = 0; // åˆå§‹åç§»æ™‚é–“ï¼š0 æ¯«ç§’\nconst segmentDuration = 60000; // æ¯æ®µéŸ³è¨Šæ˜¯ 60 ç§’ï¼ˆ60000 æ¯«ç§’ï¼‰\n\nfor (let i = 0; i < items.length; i++) {\n  const srt = items[i].json.data || items[i].json.fullSrt || items[i].json.text;\n  if (!srt) continue;\n\n  const lines = srt.trim().split('\\n');\n  let j = 0;\n\n  while (j < lines.length) {\n    if (!lines[j].includes('-->')) {\n      j++;\n      continue;\n    }\n\n    const timeLine = lines[j];\n    const contentLines = [];\n\n    j++;\n    while (j < lines.length && lines[j].trim() !== '') {\n      contentLines.push(lines[j]);\n      j++;\n    }\n\n    const [start, end] = timeLine.split(' --> ');\n    const adjustedStart = formatTime(parseTime(start) + offset);\n    const adjustedEnd = formatTime(parseTime(end) + offset);\n\n    combinedSrt += `${index}\\n${adjustedStart} --> ${adjustedEnd}\\n${contentLines.join('\\n')}\\n\\n`;\n    index++;\n    j++;\n  }\n\n  offset += segmentDuration;\n}\n\nreturn [\n  {\n    json: {\n      fullSrt: combinedSrt\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1536,
        160
      ],
      "id": "a6198b93-20a1-45b6-8a88-84c7ceafdda3",
      "name": "èª¿æ•´å­—å¹•æ™‚é–“(å–®æ®µ)"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "fullSrt"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        1328,
        -48
      ],
      "id": "187a44be-6dc4-4840-86b6-a733f7293bac",
      "name": "èšåˆå…¨éƒ¨å­—å¹•æ®µ"
    },
    {
      "parameters": {
        "jsCode": "function parseTime(timeStr) {\n  const [hours, minutes, rest] = timeStr.split(':');\n  const [seconds, milliseconds] = rest.split(',');\n  return (\n    parseInt(hours) * 3600 * 1000 +\n    parseInt(minutes) * 60 * 1000 +\n    parseInt(seconds) * 1000 +\n    parseInt(milliseconds)\n  );\n}\n\nfunction formatTime(ms) {\n  const hours = String(Math.floor(ms / 3600000)).padStart(2, '0');\n  ms %= 3600000;\n  const minutes = String(Math.floor(ms / 60000)).padStart(2, '0');\n  ms %= 60000;\n  const seconds = String(Math.floor(ms / 1000)).padStart(2, '0');\n  const milliseconds = String(ms % 1000).padStart(3, '0');\n  return `${hours}:${minutes}:${seconds},${milliseconds}`;\n}\n\nconst allBlocks = $json.fullSrt; // é€™æ˜¯ä½ çš„å­—å¹•æ®µé™£åˆ—\nlet combined = '';\nlet offset = 0;\nlet globalIndex = 1;\nconst segmentDuration = 60000; // æ¯æ®µé•·åº¦ï¼ˆ60ç§’ = 60000msï¼‰ï¼Œå¦‚éœ€èª¿æ•´å¯æ”¹é€™è£¡\n\nfor (const srtText of allBlocks) {\n  const lines = srtText.split('\\n');\n  let i = 0;\n\n  while (i < lines.length) {\n    // æª¢æŸ¥æ˜¯å¦ç‚ºæ™‚é–“ç·šï¼ˆä¾‹å¦‚ 00:00:00,000 --> 00:00:05,500ï¼‰\n    if (!lines[i].includes('-->')) {\n      i++;\n      continue;\n    }\n\n    const timeLine = lines[i];\n    const [start, end] = timeLine.split(' --> ').map(t => t.trim());\n    \n    // åŠ ä¸Šç•¶å‰çš„åç§»æ™‚é–“\n    const startMs = parseTime(start) + offset;\n    const endMs = parseTime(end) + offset;\n\n    let textLines = [];\n    i++;\n    while (i < lines.length && lines[i].trim() !== '') {\n      textLines.push(lines[i]);\n      i++;\n    }\n\n    // æ ¼å¼åŒ–ä¸¦åŠ å…¥åˆä½µå¾Œçš„å­—å¹•\n    combined += `${globalIndex}\\n${formatTime(startMs)} --> ${formatTime(endMs)}\\n${textLines.join('\\n')}\\n\\n`;\n    globalIndex++;\n    i++;\n  }\n\n  // **** ä¿®æ­£å¾Œçš„é‚è¼¯ï¼šç›´æ¥ç´¯åŠ å›ºå®šçš„æ®µè½æ™‚é–“ ****\n  // ç”±æ–¼ FFmpeg æ˜¯åš´æ ¼æŒ‰ 60 ç§’åˆ‡å‰²ï¼Œæˆ‘å€‘æ‡‰ä½¿ç”¨å›ºå®šçš„ 60000ms ä½œç‚ºä¸‹ä¸€æ®µçš„èµ·å§‹åç§»ã€‚\n  offset += segmentDuration;\n  // **********************************************\n}\n\nreturn [{ json: { finalSRT: combined } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1536,
        -48
      ],
      "id": "4cef5ddc-69ec-4a6c-a247-662525837e67",
      "name": "æ•´åˆå…¨ç‰‡å­—å¹•æ™‚é–“è»¸"
    },
    {
      "parameters": {
        "command": "rm -f /tmp/split_*.mp3"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        576,
        64
      ],
      "id": "9e8be565-93d9-4df1-8acc-1eb2dc8138ff",
      "name": "æ¸…ç©ºèˆŠçš„ split æª”æ¡ˆ"
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "https://drive.google.com/file/d/1q1FPCfJ9Mtl5eNJiUxluTsutFeZa5FAB/view?usp=drive_link",
          "mode": "url"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        64,
        64
      ],
      "id": "3da6cc4a-39f6-4d5e-930b-72e386df5d1b",
      "name": "ä¸‹è¼‰å½±ç‰‡",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "EickCpi8fyJ5UHtN",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "/tmp/a.MP4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        208,
        64
      ],
      "id": "180eb500-9c00-4919-b87a-f25250af6781",
      "name": "å¯«å…¥æœ¬åœ°æª”æ¡ˆ"
    },
    {
      "parameters": {
        "outputFormat": "aac"
      },
      "type": "@cloudconvert/n8n-nodes-cloudconvert.cloudConvert",
      "typeVersion": 1,
      "position": [
        48,
        384
      ],
      "id": "866671ab-090e-4524-8338-70def51ee282",
      "name": "å°‡ MP4 è½‰æ›ç‚º AAC",
      "credentials": {
        "cloudConvertOAuth2Api": {
          "id": "lBkePJh20tDsJn6F",
          "name": "CloudConvert account"
        }
      }
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{'/tmp/' + $binary.data.fileName}}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        240,
        384
      ],
      "id": "ba98d27a-51bf-4f4f-bf54-be671176b5da",
      "name": "å°‡ AAC æª”æ¡ˆå¯«å…¥"
    },
    {
      "parameters": {
        "jsCode": "// æ³¨æ„ï¼šæˆ‘å€‘å‡è¨­ä¸Šä¸€å€‹ç¯€é»ã€Œå¯«å…¥æœ¬åœ°æª”æ¡ˆã€æˆåŠŸå°‡å½±ç‰‡å¯«å…¥ /tmp/a.MP4\n// å³ä½¿æª”åæ˜¯å‹•æ…‹çš„ï¼Œåªè¦ç¢ºä¿è·¯å¾‘æ­£ç¢ºå³å¯ã€‚\n// ç”±æ–¼æ‚¨åœ¨ã€Œå¯«å…¥æœ¬åœ°æª”æ¡ˆã€ç¯€é»æŒ‡å®šäº† fileName: \"/tmp/a.MP4\"ï¼Œæˆ‘å€‘ç›´æ¥ä½¿ç”¨å®ƒã€‚\n\nconst inputFilePath = \"/tmp/a.MP4\";\n\n// æ–°çš„ FFmpeg å‘½ä»¤ï¼š\n// -i /tmp/a.MP4: æŒ‡å®šè¼¸å…¥æª”æ¡ˆ\n// -map 0:a: ç¢ºä¿åªé¸æ“‡éŸ³è»Œ (é¿å…è™•ç†å½±ç‰‡æµ)\n// -f segment -segment_time 60: è¨­å®šåˆ†æ®µæ¨¡å¼ï¼Œæ¯æ®µ 60 ç§’\n// -c:a libmp3lame -b:a 128k: æŒ‡å®šç·¨ç¢¼å™¨å’Œä½å…ƒç‡ç‚º MP3\n// /tmp/split_%03d.mp3: è¼¸å‡ºæª”åæ ¼å¼\nconst cmd = `/root/.n8n/tools/ffmpeg -i ${inputFilePath} -map 0:a -f segment -segment_time 60 -c:a libmp3lame -b:a 128k /tmp/split_%03d.mp3`;\n\nreturn [{ json: { command: cmd } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        400,
        64
      ],
      "id": "770736af-cda6-441a-900e-561109dd3ced",
      "name": "ç”¢ç”Ÿ ffmpeg åˆ‡å‰²å‘½ä»¤"
    },
    {
      "parameters": {
        "content": "å½±ç‰‡ä¸‹è¼‰èˆ‡è½‰æ›\n",
        "height": 224,
        "width": 512
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -160,
        0
      ],
      "typeVersion": 1,
      "id": "b69415c1-301b-4f5d-95a8-c4c3b224aea3",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "éŸ³è¨Šåˆ‡å‰²",
        "height": 240,
        "width": 704,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        368,
        0
      ],
      "typeVersion": 1,
      "id": "7d471c1e-9e7b-441f-ae82-4b8b9cc57ac7",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "é€æ®µè¾¨è­˜ + å­—å¹•æ™‚é–“æ ¡æ­£",
        "height": 480,
        "width": 608,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1088,
        -80
      ],
      "typeVersion": 1,
      "id": "29dd2be5-ab69-489e-94b5-4b47869af8d8",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "GPT-4O"
        },
        "messages": {
          "values": [
            {
              "content": "=ä½ æ˜¯ä¸€ä½è³‡æ·±æ–°èåª’é«”æ–‡å­—å·¥ä½œè€…ï¼Œæ“…é•·ä»¥å½±ç‰‡å­—å¹•æ’°å¯« SEO å‹å–„çš„ YouTube èªªæ˜æ¬„æ™‚é–“è»¸æ‘˜è¦\nè«‹é–±è®€æä¾›çš„ SRT å­—å¹•å…§å®¹ï¼ŒæŒ‘é¸é‡é»ä¸¦è¼¸å‡ºæ ¼å¼åŒ–æ‘˜è¦\n\nâš ï¸ è«‹åš´æ ¼éµå®ˆä»¥ä¸‹æ ¼å¼èˆ‡è¦å‰‡ï¼š\n1. åƒ…å…è¨±ä½¿ç”¨ã€ç¹é«”ä¸­æ–‡ã€‘ï¼Œä¸å¾—å‡ºç¾ä»»ä½•ç°¡é«”å­—\n2. è‹¥æœ‰ç°¡é«”å­—è©ï¼Œè‡ªå‹•è½‰æ›ç‚ºæ­£é«”ä¸­æ–‡è©å½™å†è¼¸å‡º\n3. ä¸å¾—ä½¿ç”¨ä»»ä½• \\nã€\\r æˆ– HTML æ¨™ç±¤æ›è¡Œ\n4. æ¯æ®µå…§å®¹è«‹ç”¨ã€Œå¯¦éš›æ›è¡Œã€ï¼ˆEnterï¼‰åˆ†è¡Œ\n5. æ¯è¡Œé–‹é ­ä¸å¾—å‡ºç¾ä»»ä½•ç¬¦è™Ÿã€æ¨™é»æˆ–è‹±æ–‡å­—æ¯\n\nç¬¬ä¸€éšæ®µï¼ˆä¸»æ—¨æ‘˜è¦ï¼‰è¦å‰‡å¦‚ä¸‹:\n- è«‹ç”¨ä¸€å¥è©±æ¦‚æ‹¬å½±ç‰‡çš„ä¸»é¡Œã€ä¸»è§’èˆ‡é—œéµäº‹ä»¶\n- å…§å®¹éœ€ç²¾ç°¡æ‰¼è¦ï¼Œä¸è¶…é 25 å€‹ç¹é«”ä¸­æ–‡å­—\n- å¥å­çµæ§‹è‡ªç„¶ï¼Œå¯ä½¿ç”¨æ¨™é»ç¬¦è™Ÿ\n- åƒ…å…è¨±ä½¿ç”¨ç´”ç¹é«”ä¸­æ–‡ï¼Œä¸å¯ä½¿ç”¨ç°¡é«”å­—\n- åš´ç¦æ›è¡Œï¼Œè¼¸å‡ºç‚ºå–®ä¸€è¡Œæ–‡å­—\n\nç¬¬äºŒéšæ®µï¼ˆæ™‚é–“è»¸æ‘˜è¦ï¼‰è¦å‰‡å¦‚ä¸‹ï¼š\n- æ‘˜è¦å½±ç‰‡ä¸­æœ€å…·ä»£è¡¨æ€§çš„æ®µè½ï¼Œæ¯æ®µ 1 å¥ç‚ºä¸»ï¼Œå¿…è¦æ™‚æœ€å¤š 2 å¥\n- æ¯å¥è©± **ä¸å¾—è¶…é 20 å€‹ä¸­æ–‡å­—**ï¼Œå‹™å¿…ã€Œç°¡æ½”æ‰¼è¦ã€ã€ã€Œèšç„¦é‡é»ã€\n- ä½¿ç”¨å­—å¹•ã€Œé–‹å§‹æ™‚é–“ã€ä½œç‚ºæ™‚é–“ç¢¼ï¼Œæ ¼å¼ç‚º MM:SSï¼ˆçœç•¥å°æ™‚èˆ‡æ¯«ç§’ï¼‰\n- æ¯æ®µæ ¼å¼ç‚ºï¼šMM:SS å…§å®¹æ‘˜è¦\n- æ¯æ®µçµå°¾ä¸å¾—æœ‰æ¨™é»\n- æ¯æ®µç¨ç«‹ä¸€è¡Œï¼Œä¸å¯æœ‰ç©ºè¡Œ\n- æ‘˜è¦æ™‚é–“ç¢¼å¿…é ˆä¾ç…§åŸå§‹ SRT æª”æ¡ˆé †åºæ’åˆ—ï¼Œä¸èƒ½é‡æ’\n- **åš´ç¦è¼¸å‡ºæ™‚é–“ç¢¼ç‚º 00:00 çš„æ®µè½**\n\nâœ… æœ€å¾Œä¸€æ®µæ™‚é–“ç¢¼ä¸å¾—æ—©æ–¼å‰ä¸€æ®µæ™‚é–“ç¢¼ï¼Œæ™‚é–“ç¢¼å¿…é ˆæŒçºŒéå¢\n\nâœ… è«‹ä¾ç…§ä»¥ä¸‹ã€æ ¼å¼ç¯„ä¾‹ã€‘æ’ç‰ˆï¼ˆæ¨¡ä»¿æ’ç‰ˆå³å¯ï¼Œç¦æ­¢ç…§æŠ„å…§å®¹ï¼‰ï¼š\n\næ·˜å¯¶æ‹¼å¤šå¤šæœªè½åœ°ç¹¼çºŒè²©å”®ï¼Œç¶“æ¿Ÿéƒ¨é•·è¡¨æ…‹ä¸æ”¯æŒ\n\n00:03 å°ç£éæ´²è±¬ç˜Ÿç ´åŠŸèˆ‡å°åŒ…è£¹æœ‰é—œ  \n00:09 æ·˜å¯¶æœªè¨­å…¬å¸é›£ä»¥ä¾æ³•ç®¡ç†  \n00:14 é¾”æ˜é‘«èªªæ˜ç›£ç®¡å›°é›£  \n00:21 ç«‹å§”æŒ‡å‡ºæ·˜å¯¶åªç™¼å‚³å–®æœªç¶“ç‡Ÿ  \n00:39 æ‰¹è©•å¯¦éš›é‹ä½œèˆ‡æ³•å¾‹è„«ç¯€  \n01:33 å•†æ¥­ç½²èªªæ˜æ ¸å‡†ç¯„åœæœ‰é™  \n01:42 æ°‘çœ¾å¤šç›´æ¥åœ¨ä¸­åœ‹å¹³å°è³¼ç‰©  \n\nğŸ“Œ è«‹ç”¢å‡ºèˆ‡ä¸Šæ–¹æ ¼å¼ä¸€è‡´çš„æ‘˜è¦çµæœï¼Œä½†æ ¹æ“šæˆ‘æä¾›çš„å­—å¹•å…§å®¹ç”Ÿæˆã€‚\nğŸ“Œ è¼¸å‡ºæ™‚ç¦æ­¢å‡ºç¾ã€Œç¬¬ä¸€éšæ®µã€ã€ã€Œç¬¬äºŒéšæ®µã€ç­‰æ¨™é¡Œæ–‡å­—ï¼Œä¹Ÿç¦æ­¢æ¨¡ä»¿é€™äº›æç¤ºèªã€‚\n\nä»¥ä¸‹æ˜¯å­—å¹•å…§å®¹ï¼š\n{{ $json.formattedSRT }}\n\nè«‹ä¾æ“šä¸Šæ–¹è¦å‰‡è¼¸å‡ºæ‘˜è¦çµæœ"
            },
            {
              "content": "ä½ æ˜¯é ‚ç´šçš„å½±ç‰‡å…§å®¹æ‘˜è¦å°ˆå®¶ï¼Œå°ˆé–€å°‡ç¹é«”ä¸­æ–‡çš„ SRT å­—å¹•æ•´ç†æˆæ¥µåº¦ç²¾ç°¡ã€å°ˆæ¥­ã€çµæ§‹åŒ–çš„æ™‚é–“è»¸é‡é»ã€‚ä½ çš„è¼¸å‡ºå¿…é ˆåªåŒ…å«é‡é»æ‘˜è¦ï¼Œåš´ç¦ä»»ä½•è§£é‡‹æ€§æˆ–å¼•å°æ€§æ–‡å­—ã€‚",
              "role": "system"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1936,
        -48
      ],
      "id": "ab728edb-c258-40c6-8e67-907f3a5a0637",
      "name": "é‡é»æ•´ç†",
      "credentials": {
        "openAiApi": {
          "id": "dvFQiP3wnloi1k4P",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "é‡é»æ•´ç†èˆ‡è¼¸å‡º\n",
        "height": 240,
        "width": 816,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1728,
        -96
      ],
      "typeVersion": 1,
      "id": "12ed010e-d021-4f7e-b52f-b510ab11b9b1",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "å•é¡Œ1:\næœ‰å¤–èªéƒ¨åˆ†æœƒå‡ºç¾æ™‚è»¸å°ä¸èµ·ä¾† (çœ‹èµ·ä¾†æ˜¯ä¸æœƒç¿»è­¯)\n\nå•é¡Œ2:\nå¯å˜—è©¦è½‰æˆè‹±æ–‡ä¹‹å¾Œå†è½‰ä¸­æ–‡ç”¢å‡º",
        "height": 128,
        "width": 784,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -432,
        -208
      ],
      "typeVersion": 1,
      "id": "4da4ab4f-3c33-4576-8859-7c202ff55ef0",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "command": "rm -f /tmp/a.MP4 /tmp/*.aac /tmp/split_*.mp3"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        2400,
        -48
      ],
      "id": "4ae140fe-b0ad-4751-a114-bda7de4593ff",
      "name": "æ¸…ç†è‡¨æ™‚æª”æ¡ˆ"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/push",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Authorization",
              "value": "Bearer uyFsNxbqCu+sqt0mCb3CUl+lg/pW2yHPc9am9H9FSTB/WFFMPzcKx94wpVlbU4vs08uVgTwlzoBQcRQS4iuTIn/SwZXqYO6W6oqc9zDdqkIibcatRtdYNf2jTX2+1nMiHhLXK1J3xWLvq/OKupiNsAdB04t89/1O/w1cDnyilFU="
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"to\": \"U970d6e484607445514ee7a7ea31e3dca\",\n  \"messages\": [\n    {\n      \"type\": \"text\",\n      \"text\": {{ JSON.stringify($json.message.content) }}\n    }\n  ]\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2240,
        -48
      ],
      "id": "0b33cf08-4c8c-4fd6-8820-cf55557fece7",
      "name": "LINEé€šçŸ¥",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "const srt = $json.finalSRT;\n\nconst segments = srt\n  .split('\\n\\n')\n  .map(block => {\n    const lines = block.trim().split('\\n');\n    if (lines.length < 3) return null;\n\n    const [index, timeLine, ...textLines] = lines;\n    const [startRaw, endRaw] = timeLine.split(' --> ');\n\n    const formatTime = t => {\n      const [h, m, sMs] = t.split(':');\n      const s = sMs.split(',')[0];\n      return `${parseInt(h) * 60 + parseInt(m)}:${s.padStart(2, '0')}`;\n    };\n\n    const start = formatTime(startRaw);\n    const end = formatTime(endRaw);\n    const text = textLines.join(' ');\n\n    return `${start} ~ ${end} ${text}`;\n  })\n  .filter(Boolean);\n\nreturn [{ json: { formattedSRT: segments.join('\\n') } }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1760,
        -48
      ],
      "id": "1bf804e7-0861-4a6d-8d21-16c7be7e61bd",
      "name": "è½‰æ›æ™‚é–“è»¸æ ¼å¼"
    }
  ],
  "pinData": {
    "When clicking â€˜Execute workflowâ€™": [
      {
        "json": {}
      }
    ]
  },
  "connections": {
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "ä¸‹è¼‰å½±ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è®€å–åˆ†æ®µéŸ³è¨Š": {
      "main": [
        [
          {
            "node": "é€æ®µè™•ç†éŸ³è¨Š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "é€æ®µè™•ç†éŸ³è¨Š": {
      "main": [
        [
          {
            "node": "èšåˆå…¨éƒ¨å­—å¹•æ®µ",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "éŸ³è¨Šè½‰å­—å¹•",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éŸ³è¨Šè½‰å­—å¹•": {
      "main": [
        [
          {
            "node": "èª¿æ•´å­—å¹•æ™‚é–“(å–®æ®µ)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èª¿æ•´å­—å¹•æ™‚é–“(å–®æ®µ)": {
      "main": [
        [
          {
            "node": "é€æ®µè™•ç†éŸ³è¨Š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "èšåˆå…¨éƒ¨å­—å¹•æ®µ": {
      "main": [
        [
          {
            "node": "æ•´åˆå…¨ç‰‡å­—å¹•æ™‚é–“è»¸",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éŸ³è¨Šåˆ‡å‰²æ¯60ç§’": {
      "main": [
        [
          {
            "node": "è®€å–åˆ†æ®µéŸ³è¨Š",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ•´åˆå…¨ç‰‡å­—å¹•æ™‚é–“è»¸": {
      "main": [
        [
          {
            "node": "è½‰æ›æ™‚é–“è»¸æ ¼å¼",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ¸…ç©ºèˆŠçš„ split æª”æ¡ˆ": {
      "main": [
        [
          {
            "node": "éŸ³è¨Šåˆ‡å‰²æ¯60ç§’",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è¼‰å½±ç‰‡": {
      "main": [
        [
          {
            "node": "å¯«å…¥æœ¬åœ°æª”æ¡ˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¯«å…¥æœ¬åœ°æª”æ¡ˆ": {
      "main": [
        [
          {
            "node": "ç”¢ç”Ÿ ffmpeg åˆ‡å‰²å‘½ä»¤",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å°‡ MP4 è½‰æ›ç‚º AAC": {
      "main": [
        [
          {
            "node": "å°‡ AAC æª”æ¡ˆå¯«å…¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å°‡ AAC æª”æ¡ˆå¯«å…¥": {
      "main": [
        []
      ]
    },
    "ç”¢ç”Ÿ ffmpeg åˆ‡å‰²å‘½ä»¤": {
      "main": [
        [
          {
            "node": "æ¸…ç©ºèˆŠçš„ split æª”æ¡ˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "é‡é»æ•´ç†": {
      "main": [
        [
          {
            "node": "LINEé€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LINEé€šçŸ¥": {
      "main": [
        [
          {
            "node": "æ¸…ç†è‡¨æ™‚æª”æ¡ˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è½‰æ›æ™‚é–“è»¸æ ¼å¼": {
      "main": [
        [
          {
            "node": "é‡é»æ•´ç†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "782e3269-3c74-4911-bcc0-e55322b0d42b",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a23b4820fe3b701625b3a1d43bcd07de547c008709de7f4aa30a706d2a646fd3"
  },
  "id": "Pp6k3j9MLqVYOU98",
  "tags": []
}
